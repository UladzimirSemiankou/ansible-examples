# Inventory

[http://docs.ansible.com/ansible/intro_inventory.html]

Example contents:
- [demo playbook](inventory_example.yml)
- [sample inventory](inventory)

In order to be able to run this example you should configure a couple of hosts and add them to the sample inventory.

```sh
ansible-playbook inventory_example.yml -i inventory
```
```sh
PLAY [atlanta] *************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [35.184.194.164]

TASK [Atlanta group] *******************************************************************************************************************************************
ok: [35.184.194.164] => {
    "region": "atlanta"
}

PLAY [raleigh] *************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [35.184.156.100]

TASK [Raleigh group] *******************************************************************************************************************************************
ok: [35.184.156.100] => {
    "region": "raleigh"
}

PLAY [southeast] ***********************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [35.184.156.100]
ok: [35.184.194.164]

TASK [Southeast group] *****************************************************************************************************************************************
ok: [35.184.194.164] => {
    "region": "atlanta"
}
ok: [35.184.156.100] => {
    "region": "raleigh"
}

PLAY [usa] *****************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [35.184.156.100]
ok: [35.184.194.164]

TASK [USA group] ***********************************************************************************************************************************************
ok: [35.184.194.164] => {
    "region": "atlanta"
}
ok: [35.184.156.100] => {
    "region": "raleigh"
}

PLAY [dbservers:webservers] ************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [db1]
ok: [web1]
ok: [web2]
ok: [db2]

TASK [task runs on dbservers or webservers] ********************************************************************************************************************
ok: [db1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}
ok: [db2] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "prom-node-exporter.c.cp100-167512.internal"
}
ok: [web1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}
ok: [web2] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "prom-node-exporter.c.cp100-167512.internal"
}

PLAY [dbservers:!backup] ***************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [db1]

TASK [task runs on hosts that are in dbservers AND NOT in backup] **********************************************************************************************
ok: [db1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}

PLAY [dbservers:webservers:!backup] ****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [db1]
ok: [web1]

TASK [task runs on hosts that are in dbservers,webservers AND NOT in backup] ***********************************************************************************
ok: [db1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}
ok: [web1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}

PLAY [webservers:&backup] **************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [web2]

TASK [task runs on hosts that are in webservers AND in backup] *************************************************************************************************
ok: [web2] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "prom-node-exporter.c.cp100-167512.internal"
}

PLAY [webservers[0]:backup[-1]] ********************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************
ok: [web2]
ok: [web1]

TASK [task runs on the first host from webservers and on last host in backup] **********************************************************************************
ok: [web1] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "node-1.c.cp100-167512.internal"
}
ok: [web2] => {
    "hostvars[inventory_hostname][\"ansible_fqdn\"]": "prom-node-exporter.c.cp100-167512.internal"
}

PLAY RECAP *****************************************************************************************************************************************************
35.184.156.100             : ok=6    changed=0    unreachable=0    failed=0   
35.184.194.164             : ok=6    changed=0    unreachable=0    failed=0   
db1                        : ok=6    changed=0    unreachable=0    failed=0   
db2                        : ok=2    changed=0    unreachable=0    failed=0   
web1                       : ok=6    changed=0    unreachable=0    failed=0   
web2                       : ok=6    changed=0    unreachable=0    failed=0   

```
